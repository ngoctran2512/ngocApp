<% if !current_user.nil? %>
	<%= form_for(Micropost.new) do |f| %>
	  <%= render "shared/error_messages", object: f.object %>
	  <div class="field">
	    <%= f.text_area :content, placeholder: "Compose new micropost..." %>
	  </div>
	  <div class="hello">
	  <%= f.submit "Post", class: "btn btn-primary" %>
	  </div>
	  <span class="picture">
	    <%= f.file_field :picture, accept: "image/jpeg,image/gif,image/png" %>
	  </span>
	<% end %>
<% end %>


<ul>
	<%= @microposts.each do |micropost| %>
		<li>
		  <span class="user"><%= link_to micropost.user.name, micropost.user %></span>
		  <span class="content">

		    <%= micropost.content %>
		    <%= image_tag micropost.picture.url if micropost.picture? %>
		  </span>
		  <span class="timestamp">
		    Posted <%= time_ago_in_words(micropost.created_at) %> ago.
		    <% if current_user?(micropost.user) %>
		      <%= link_to "delete", micropost, method: :delete,
		                                       data: { confirm: "You sure?" } %>
		    <% end %>
		      <%= link_to "Comment", micropost %>

		  </span>
		</li>
	<% end %>
</ul>
<%= will_paginate %>
<script type="text/javascript">
  $("#micropost_picture").bind("change", function() {
    var size_in_megabytes = this.files[0].size/1024/1024;
    if (size_in_megabytes > 10) {
      alert("Maximum file size is 10MB. Please choose a smaller file.");
    }
  });
</script>